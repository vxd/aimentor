# Проект "400 дней трансформации" - MVP Спецификация

## 1. Обзор проекта

**Концепция:** Telegram-бот для личной трансформации в течение 400 дней с ежедневной поддержкой, трекингом привычек и milestone-системой.

**Технический стек:**
- Python (Telegram Bot API)
- PostgreSQL (хранение данных)
- Vosk (распознавание голосовых сообщений)

**Целевая аудитория:** Люди, стремящиеся к системным изменениям в жизни через структурированный подход и ежедневную поддержку.

---

## 2. Основные роли пользователей

### 2.1 Пользователь (User)
Человек, проходящий программу 400-дневной трансформации.

### 2.2 Система (Bot/Coach)
Автоматизированный коуч-ассистент, предоставляющий инструкции и анализирующий прогресс.

---

## 3. User Stories для MVP

### ЭПИК 1: Онбординг и первичная настройка

#### US-001: Регистрация и знакомство
**Как** новый пользователь  
**Я хочу** зарегистрироваться в боте и пройти онбординг  
**Чтобы** начать программу трансформации

**Acceptance Criteria:**
- Пользователь получает приветственное сообщение при команде /start
- Бот объясняет концепцию программы (400 дней, 4 столпа)
- Пользователь подтверждает готовность начать программу
- Создается профиль пользователя в БД с датой старта

**Приоритет:** Must Have  
**Story Points:** 3

---

#### US-002: Диагностика текущего состояния
**Как** новый пользователь  
**Я хочу** оценить свое текущее состояние по 4 столпам  
**Чтобы** определить точку А и поставить цели

**Acceptance Criteria:**
- Бот задает вопросы по каждому из 4 столпов (Здоровье, Финансы, Психика, Духовность)
- Пользователь может ответить текстом или голосом
- Голосовые ответы транскрибируются через Vosk
- Результаты диагностики сохраняются в БД
- Бот формирует краткую сводку текущего состояния

**Приоритет:** Must Have  
**Story Points:** 8

---

#### US-003: Целеполагание
**Как** новый пользователь  
**Я хочу** установить цели по каждому столпу на 400 дней  
**Чтобы** иметь четкое направление развития

**Acceptance Criteria:**
- Бот предлагает шаблоны целей для каждого столпа
- Пользователь может создать свои цели (текст/голос)
- Цели сохраняются и привязываются к milestone-датам (100, 200, 300, 400 дней)
- Бот показывает сводку всех установленных целей

**Приоритет:** Must Have  
**Story Points:** 5

---

### ЭПИК 2: Ежедневные ритуалы

#### US-004: Утренняя инструкция
**Как** пользователь программы  
**Я хочу** получать утреннюю инструкцию с фокусом дня  
**Чтобы** начать день с ясным планом действий

**Acceptance Criteria:**
- Бот отправляет утреннее сообщение в установленное время (настройка по умолчанию 7:00)
- Инструкция содержит: фокус дня, задачи по столпам, мотивационную цитату
- Пользователь может подтвердить получение кнопкой "Начинаю день"
- Инструкция учитывает текущую фазу программы (Диагностика/Система/Рост)
- Контент персонализируется на основе прогресса пользователя

**Приоритет:** Must Have  
**Story Points:** 5

---

#### US-005: Вечерний чек-ин (текст)
**Как** пользователь программы  
**Я хочу** отправить вечерний отчет о прожитом дне текстом  
**Чтобы** зафиксировать прогресс и получить обратную связь

**Acceptance Criteria:**
- Бот отправляет напоминание о вечернем отчете (по умолчанию в 21:00)
- Пользователь может ответить текстовым сообщением
- Бот задает уточняющие вопросы по 4 столпам
- Отчет сохраняется в БД с меткой времени
- Бот предоставляет краткую обратную связь и рекомендации

**Приоритет:** Must Have  
**Story Points:** 5

---

#### US-006: Вечерний чек-ин (голос)
**Как** пользователь программы  
**Я хочу** отправить голосовой отчет о прожитом дне  
**Чтобы** быстро и естественно поделиться своими мыслями

**Acceptance Criteria:**
- Пользователь может отправить голосовое сообщение вместо текста
- Vosk транскрибирует голосовое сообщение в текст
- Транскрибированный текст обрабатывается как обычный отчет
- Пользователь видит транскрипцию своего сообщения
- В БД сохраняется как аудиофайл, так и транскрипция

**Приоритет:** Should Have  
**Story Points:** 8

---

#### US-007: Быстрые заметки в течение дня
**Как** пользователь программы  
**Я хочу** отправлять короткие заметки/мысли в течение дня  
**Чтобы** фиксировать важные моменты по мере их возникновения

**Acceptance Criteria:**
- Пользователь может отправить сообщение в любое время
- Бот распознает тип сообщения (отчет/заметка/вопрос)
- Заметки сохраняются и привязываются к текущему дню
- Заметки учитываются при формировании недельного обзора

**Приоритет:** Could Have  
**Story Points:** 3

---

### ЭПИК 3: Трекинг и статистика

#### US-008: Трекинг привычек
**Как** пользователь программы  
**Я хочу** отмечать выполнение ежедневных привычек  
**Чтобы** видеть свою консистентность

**Acceptance Criteria:**
- Пользователь может установить до 5 ключевых привычек
- Бот предлагает отметить привычки в конце дня
- Интерфейс с кнопками для быстрой отметки (✅/❌)
- Подсчет streak (серий выполнения)
- Визуализация прогресса по привычкам за неделю/месяц

**Приоритет:** Must Have  
**Story Points:** 8

---

#### US-009: Просмотр ежедневного прогресса
**Как** пользователь программы  
**Я хочу** видеть свой прогресс по каждому столпу  
**Чтобы** понимать, где я двигаюсь вперед

**Acceptance Criteria:**
- Команда /progress показывает текущий статус
- Отображается прогресс по каждому из 4 столпов
- Показывается количество пройденных дней (X из 400)
- Отображается процент до следующего milestone
- Показывается streak по ежедневным отчетам

**Приоритет:** Must Have  
**Story Points:** 5

---

#### US-010: Просмотр истории записей
**Как** пользователь программы  
**Я хочу** просматривать свои прошлые отчеты  
**Чтобы** анализировать динамику изменений

**Acceptance Criteria:**
- Команда /history показывает список последних отчетов
- Пользователь может выбрать период (последние 7/30 дней)
- Можно фильтровать по столпу
- Отображается краткая сводка каждого дня
- Возможность посмотреть детали конкретного дня

**Приоритет:** Should Have  
**Story Points:** 5

---

### ЭПИК 4: Еженедельный анализ

#### US-011: Еженедельный обзор
**Как** пользователь программы  
**Я хочу** получать еженедельный анализ прогресса  
**Чтобы** корректировать свой путь

**Acceptance Criteria:**
- Бот отправляет обзор каждое воскресенье вечером (или понедельник утром)
- Обзор включает: основные достижения недели, паттерны поведения, области для улучшения
- Анализ по каждому из 4 столпов
- Streak по привычкам
- Вопросы для рефлексии
- Предложения на следующую неделю

**Приоритет:** Must Have  
**Story Points:** 8

---

#### US-012: Планирование следующей недели
**Как** пользователь программы  
**Я хочу** планировать фокусы на следующую неделю  
**Чтобы** двигаться к целям осознанно

**Acceptance Criteria:**
- После еженедельного обзора бот предлагает установить 3 главные задачи на неделю
- Пользователь может выбрать приоритетный столп на неделю
- План сохраняется и учитывается в утренних инструкциях
- В конце недели бот показывает степень выполнения плана

**Приоритет:** Should Have  
**Story Points:** 5

---

### ЭПИК 5: Milestone-система

#### US-013: Milestone на 30 дней
**Как** пользователь программы  
**Я хочу** провести промежуточный анализ после 30 дней  
**Чтобы** оценить результаты первой фазы

**Acceptance Criteria:**
- На 30-й день бот инициирует специальный milestone-ритуал
- Пересмотр целей и начальной диагностики
- Анализ паттернов и привычек за месяц
- Пользователь отвечает на ключевые вопросы
- Формируется отчет о фазе "Диагностика и фундамент"
- Корректировка плана для фазы 2

**Приоритет:** Must Have  
**Story Points:** 8

---

#### US-014: Milestone каждые 100 дней
**Как** пользователь программы  
**Я хочу** проходить крупные milestone-чекпоинты  
**Чтобы** видеть масштаб своей трансформации

**Acceptance Criteria:**
- На днях 100, 200, 300 бот инициирует углубленный анализ
- Сравнение с начальным состоянием
- Оценка прогресса по целям
- Празднование достижений
- Пересмотр и корректировка целей на следующие 100 дней
- Специальная мотационная обратная связь

**Приоритет:** Must Have  
**Story Points:** 13

---

#### US-015: Завершение программы (400 дней)
**Как** пользователь программы  
**Я хочу** получить итоговый анализ после 400 дней  
**Чтобы** увидеть полную картину трансформации

**Acceptance Criteria:**
- На 400-й день бот инициирует финальный ритуал
- Полный анализ всех 4 столпов: было → стало
- Визуализация пути трансформации
- Достижения и статистика (streak, выполненные привычки)
- Экспорт всех данных и отчетов
- Поздравление и рекомендации на будущее
- Опция продолжить с новым циклом

**Приоритет:** Should Have  
**Story Points:** 13

---

### ЭПИК 6: Настройки и вспомогательные функции

#### US-016: Настройка времени уведомлений
**Как** пользователь программы  
**Я хочу** настроить время отправки утренних и вечерних сообщений  
**Чтобы** подстроить программу под свой режим дня

**Acceptance Criteria:**
- Команда /settings открывает меню настроек
- Пользователь может установить время утренней инструкции
- Пользователь может установить время вечернего напоминания
- Настройки сохраняются и применяются к расписанию
- Можно временно отключить напоминания

**Приоритет:** Should Have  
**Story Points:** 5

---

#### US-017: Помощь и FAQ
**Как** пользователь программы  
**Я хочу** получить помощь по работе с ботом  
**Чтобы** понимать все возможности

**Acceptance Criteria:**
- Команда /help показывает основные команды
- FAQ с ответами на частые вопросы
- Примеры форматов ответов
- Описание логики работы milestone
- Контакты для обратной связи

**Приоритет:** Must Have  
**Story Points:** 3

---

#### US-018: Пропуск дня
**Как** пользователь программы  
**Я хочу** пропустить день без потери прогресса  
**Чтобы** программа была гибкой к жизненным обстоятельствам

**Acceptance Criteria:**
- Если пользователь не ответил до полуночи, день считается пропущенным
- Бот отправляет мягкое напоминание на следующий день
- Streak по отчетам прерывается, но общий прогресс продолжается
- Статистика учитывает процент активных дней
- Пользователь может добавить ретроспективную заметку за пропущенный день

**Приоритет:** Should Have  
**Story Points:** 3

---

## 4. Дополнительные фичи (Post-MVP)

### US-019: AI-анализ отчетов
**Описание:** Интеграция LLM для более глубокого анализа текстовых и голосовых отчетов, выявления паттернов и персонализированных рекомендаций.

**Приоритет:** Could Have

---

### US-020: Визуализация данных
**Описание:** Генерация графиков и диаграмм прогресса по столпам, экспорт в PDF-отчеты.

**Приоритет:** Could Have

---

### US-021: Сообщество и accountability partners
**Описание:** Возможность найти партнера по программе, делиться достижениями, групповые челленджи.

**Приоритет:** Could Have

---

### US-022: Персональные метрики
**Описание:** Трекинг числовых показателей (вес, финансы, количество медитаций и т.д.) с графиками динамики.

**Приоритет:** Could Have

---

### US-023: Библиотека контента
**Описание:** Статьи, упражнения, техники по каждому столпу, рекомендуемые на основе прогресса.

**Приоритет:** Could Have

---

## 5. MVP Scope Prioritization

### Must Have (Минимальный MVP)
- US-001: Регистрация и знакомство
- US-002: Диагностика текущего состояния
- US-003: Целеполагание
- US-004: Утренняя инструкция
- US-005: Вечерний чек-ин (текст)
- US-008: Трекинг привычек
- US-009: Просмотр ежедневного прогресса
- US-011: Еженедельный обзор
- US-013: Milestone на 30 дней
- US-014: Milestone каждые 100 дней
- US-017: Помощь и FAQ

**Итого:** 11 stories, ~60 story points

---

### Should Have (Расширенный MVP)
- US-006: Вечерний чек-ин (голос)
- US-010: Просмотр истории записей
- US-012: Планирование следующей недели
- US-015: Завершение программы (400 дней)
- US-016: Настройка времени уведомлений
- US-018: Пропуск дня

**Итого:** 6 stories, ~37 story points

---

### Could Have (Будущие итерации)
- US-007: Быстрые заметки в течение дня
- US-019 - US-023: AI-анализ, визуализация, сообщество, метрики, контент

---

## 6. Технические требования для реализации

### 6.1 База данных (PostgreSQL)

**Основные таблицы:**
- `users` - профили пользователей
- `user_goals` - цели по столпам
- `daily_reports` - ежедневные отчеты
- `habits` - список привычек
- `habit_tracking` - отметки привычек
- `milestones` - данные milestone-анализов
- `voice_messages` - метаданные голосовых сообщений
- `transcriptions` - транскрипции голосовых сообщений
- `notifications_settings` - настройки уведомлений

### 6.2 Интеграции

**Telegram Bot API:**
- Обработка текстовых и голосовых сообщений
- Inline-кнопки для взаимодействия
- Scheduled messages для уведомлений

**Vosk:**
- Оффлайн распознавание русской речи
- Обработка аудио от 10 сек до 5 мин

### 6.3 Архитектурные компоненты

- **Bot Handler** - обработка входящих сообщений
- **State Machine** - управление состоянием диалога
- **Scheduler** - планировщик уведомлений (утро/вечер/неделя)
- **Analytics Engine** - анализ прогресса и формирование обратной связи
- **Voice Processor** - обработка и транскрипция голоса

---

## 7. Метрики успеха MVP

### Engagement метрики:
- **Daily Active Users (DAU)** - процент активных пользователей в день
- **Response Rate** - % дней с отправленными отчетами
- **Average Streak** - средняя длина серии активности

### Retention метрики:
- **Day 7 Retention** - сколько пользователей активны на 7-й день
- **Day 30 Retention** - сколько пользователей дошли до 1-го milestone
- **Completion Rate** - % пользователей, завершивших 400 дней

### Quality метрики:
- **Voice Usage** - % использования голосовых отчетов
- **Habit Consistency** - средний % выполнения привычек
- **User Satisfaction** - оценка пользователей (опрос на milestone)

---

## 8. Риски и митигация

| Риск | Вероятность | Воздействие | Митигация |
|------|-------------|-------------|-----------|
| Низкая retention после первой недели | Высокая | Критическое | Фокус на onboarding, быстрые wins, геймификация |
| Качество транскрипции Vosk | Средняя | Среднее | Fallback на текст, улучшение промптов |
| Перегрузка пользователя функциями | Средняя | Среднее | Постепенное раскрытие функций по фазам |
| Отсутствие персонализации в MVP | Низкая | Среднее | Базовые правила персонализации |

---

## 9. План развертывания MVP

### Спринт 1 (2 недели): Фундамент
- Настройка инфраструктуры (БД, Telegram Bot)
- US-001, US-017 (регистрация, помощь)
- Базовая state machine

### Спринт 2 (2 недели): Онбординг
- US-002 (диагностика)
- US-003 (целеполагание)
- Интеграция Vosk (базовая)

### Спринт 3 (2 недели): Ежедневные ритуалы
- US-004 (утренние инструкции)
- US-005 (вечерний чек-ин текст)
- Scheduler для уведомлений

### Спринт 4 (2 недели): Трекинг
- US-008 (трекинг привычек)
- US-009 (просмотр прогресса)
- US-006 (голосовые отчеты)

### Спринт 5 (2 недели): Анализ и milestone
- US-011 (еженедельный обзор)
- US-013 (milestone 30 дней)
- US-014 (milestone 100 дней)

### Спринт 6 (1 неделя): Полировка и тестирование
- Bug fixes
- UX improvements
- Beta-тестирование с 5-10 пользователями

**Общая длительность MVP:** 11 недель (~2.5 месяца)

---

## 10. Критерии готовности MVP к запуску

✅ Пользователь может пройти полный onboarding  
✅ Бот отправляет утренние и вечерние сообщения  
✅ Работает прием текстовых и голосовых отчетов  
✅ Реализован трекинг минимум 3 привычек  
✅ Генерируется еженедельный обзор  
✅ Реализован milestone на 30 дней  
✅ Качество транскрипции голоса >80%  
✅ Базовая персонализация контента работает  
✅ Документация и help-команды заполнены  
✅ Проведено тестирование с фокус-группой

---

*Документ подготовлен на основе концепции проекта "400 дней трансформации" с учетом лучших практик разработки habit-tracking и coaching ботов.*
